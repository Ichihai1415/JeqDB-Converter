# JeqDB-Converter

気象庁震度データベース処理ソフト

## **[.NET 8.0 ランタイム x64](https://dotnet.microsoft.com/ja-jp/download/dotnet/8.0)** が必要です。

.NET デスクトップ ランタイム8.0.x x64をインストールすればいいはずです。

---

## 同梱

### フォント:[Koruri](https://koruri.github.io/)

### 日本地図データ:[気象庁 予報区等GISデータ](https://www.data.jma.go.jp/developer/gis.html)
加工(簡素化)しています。

### 世界地図データ:[Natural Earth](https://www.naturalearthdata.com/downloads/)
加工(簡素化、日本部分を削除)しています。

日本地図データは[このページ](https://github.com/Ichihai1415/JMA-GIS-GeoJSON)のものも使えるはずです。ダウンロードして`map-jp.geojson`を変えてください。(同梱しているのは`AreaInformationPrefectureEarthquake_GIS_20190125_01.geojson`)
例えば`AreaInformationPrefectureEarthquake_GIS_20190125_1.geojson`(`_01`ではなく`_1`のほう)を使えばもう少し細かく描画されます。

## 概要

コンソールに表示される内容に従ってください。

"入力してください"とあるときは、Enterキーを押して確定してください。"空文字を入力してください"とあるときは何も入力せずにEnterキーを押してください。

### 複数ファイルの結合

1000以上の情報を描画する際に使用してください。(描画ではファイルの読み込みは1つのみです。)順番は気にしなくてもいいです。

### 画像描画

情報をすべて描画します。古い順に描画されます。`output\image\`に保存されます。

### 動画作成

設定されたとおりに描画されます。古い順に描画されます。`output\videoimage\`に保存されます。

終了時コマンドが表示されるので、画像があるフォルダで実行してください。※ffmpeg.exeが環境変数に設定されている必要があります。

### csv取得

震度データベースのAPIにリクエストを送ってcsv形式にして保存します。`output\csv\`に保存されます。一部設定のみです。

## 配色について

配色は`colors.json`を編集することで変更できます。起動時あれば読み込んで上書き、なければ作成します。

基本は`"Red,Green,Blue"`または`"Alpha,Red,Green,Blue"`形式(すべて0～255、Alphaは255で不透明)で指定してください。描画ごとに読み込まれます。 `Hypo_Alpha`で震央円の透明度(0～255)を変えられます。

標準色(BlackやWhite等)でも指定できます。なお、標準色相当の値を設定した場合起動時に標準色に置き換わります(`"0,0,0"`を指定して処理すると勝手に`"Black"`になります)。

---

## 更新履歴

### v1.0.2

2024/03/16

- 配色設定、透明度設定を追加
- 地図データ表記が震央円に隠れることがある問題を修正
- 右欄深さ表示を右揃えに
- ライブラリ更新、コード調整
- READMEに配色について追記

### v1.0.1

2024/03/15

- 円のサイズ計算の方法を選択可能に
- 震度５,震度６(強弱ないもの)が含まれるものの描画に失敗する問題を修正
- 観測震度検索されたcsvファイルの結合で正確にできない問題を修正
- 補足文、起動表示を追加
- 地図データを更新(微妙に細かく)
- READMEに日本地図データの変更について等追記

### v1.0.0

2023/12/31

- 複数ファイルの結合、画像描画、動画作成、csv取得機能追加
