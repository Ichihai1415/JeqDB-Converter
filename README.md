# JeqDB-Converter

気象庁震度データベース処理ソフト

震度データベース・震源リストの画像・動画を作成できます。

## **[.NET 9.0 ランタイム x64](https://dotnet.microsoft.com/ja-jp/download/dotnet/9.0)** が必要です。

.NET デスクトップ ランタイム9.0.x x64をインストールすればいいはずです(コンソールなので.NET Runtime 9.0.xでも動くはずです)。

---

## 同梱

### フォント:[Koruri](https://koruri.github.io/)

### 日本地図データ:[気象庁 予報区等GISデータ](https://www.data.jma.go.jp/developer/gis.html)
加工(簡素化)しています。

[このページ](https://github.com/Ichihai1415/JMA-GIS-GeoJSON)のものも使えるはずです。ダウンロードして`map-jp.geojson`を変えてください。(同梱しているのは`AreaInformationPrefectureEarthquake_GIS_20190125_1.geojson`)

v1.1.0より`...20190125_01.geojson`から`...20190125_1.geojson`に変更しました。動画描画でもマップは1回のみの描画なのでそれほど変わりません。

### 世界地図データ:[Natural Earth](https://www.naturalearthdata.com/downloads/)
加工(簡素化、日本部分を削除)しています。

### del_png.bat
動画用画像の削除batファイルです。実行ファイルと同じ場所のまま実行してください。

## 概要

コンソールに表示される内容に従ってください。

"入力してください"とあるときは、Enterキーを押して確定してください。"空文字を入力してください"とあるときは何も入力せずにEnterキーを押してください。

キャンセルはないのでコンソールを開きなおしてください。

### 複数ファイルの結合

1000以上の情報を描画する際に使用してください。(画像描画ではファイルの読み込みは1つのみです。)順番は気にしなくてもいいです。

### 画像描画

情報をすべて描画します。古い順に描画されます。`output\image\`に保存されます。

### 動画作成

設定されたとおりに描画されます。古い順に描画されます。`output\videoimage\`に保存されます。

終了時フレームレートを入力すると動画を作成します。再作成したい場合、コマンドが表示されるので、画像があるフォルダで実行してください。※ffmpeg.exeが環境変数に設定されている必要があります。

### csv取得

震度データベースのAPIにリクエストを送ってcsv形式にして保存します。`output\csv\`に保存されます。一部設定のみです。

## 配色について

配色は`colors.json`を編集することで変更できます。起動時あれば読み込んで上書き、なければ作成します。

基本は`"Red, Green, Blue"`または`"Alpha, Red, Green, Blue"`形式(すべて0～255、Alphaは255で不透明)で指定してください。描画ごとに読み込まれます。 `Hypo_Alpha`で震央円の透明度(0～255)を変えられます。`Legend_Mag_Fill`で凡例での塗りつぶし色を変えられます。いずれも透明度を0にすることで完全に透明になります。

~~標準色(BlackやWhite等)でも指定できます。なお、標準色相当の値を設定した場合起動時に標準色に置き換わります(`"0,0,0"`を指定して処理すると勝手に`"Black"`になります)。~~

v1.1.0より数字指定のみになりました。

---

## 更新履歴

### v1.1.2

2025/06/23

- 震央分布の取得、描画を追加

### v1.1.1

2025/04/08

- 右欄最小震度を1にすると震度情報なしのものも描画されてしまう問題を修正(震度情報なしデータは量が多いため描画できないようになりました)
- 規模や深さ等が不明のものの処理を調整
- (内部)プロジェクトの調整

### v1.1.0

2025/03/11

- ランタイムの更新、ライブラリの変更・更新、伴うコードの調整
- マグニチュード・深さの凡例を追加
- 右側に旧震度５、６が描画されない問題を修正
- 日付不明データ等の処理を修正
- 動画描画で一括読み込みができるように
- 日本地図データを変更
- 動画用画像の削除batファイルを同梱
- その他調整など(commit履歴を確認してください)

### v1.0.3

2024/11/23

- [震源リスト](https://www.data.jma.go.jp/eqev/data/daily_map/index.html)の地震も描画できるように

### v1.0.2

2024/03/16

- 配色設定、透明度設定を追加
- 地図データ表記が震央円に隠れることがある問題を修正
- 右欄深さ表示を右揃えに
- ライブラリ更新、コード調整
- READMEに配色について追記

### v1.0.1

2024/03/15

- 円のサイズ計算の方法を選択可能に
- 震度５,震度６(強弱ないもの)が含まれるものの描画に失敗する問題を修正
- 観測震度検索されたcsvファイルの結合で正確にできない問題を修正
- 補足文、起動表示を追加
- 地図データを更新(微妙に細かく)
- READMEに日本地図データの変更について等追記

### v1.0.0

2023/12/31

- 複数ファイルの結合、画像描画、動画作成、csv取得機能追加
